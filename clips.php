<?require("common.php");conn();$limit = $HTTP_GET_VARS['l'];$order_by = $HTTP_GET_VARS['o'];$type = $HTTP_GET_VARS['t'];$pub = $HTTP_GET_VARS['p'];?><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd"><html>	<head><meta http-equiv="content-type" content="text/html;charset=iso-8859-1"><title>www.parkermorse.net : work</title><link rel="stylesheet" href="/styles1.css"></head>	<body bgcolor="white" text="#999999"> <?head();?>  <p class="sectionHead">clips</p>  <p>Selected articles I've written for <a href="http://www.runnersworld.com">Runner's   World Online</a>, <a href="http://www.nycmarathon.org/">nycmarathon.org</a>,   <a href="http://www.mensracing.com/">mensracing.com</a> and <a href="http://www.fast-women.com/">fast-women.com</a>.   </p><form action="clips.php" method=GET><p>You can sort this list:<br>Sort by <select name="o"><option value="date_d">Date, newest to oldest</option><option value="date_a">Date, oldest to newest</option><option value="title">Title</option><option value="type">Type</option><option value="pub">Publication</option></select><br>Limit to <select name="l"><option value="">all</option<option>15</option><option>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>50</option><option>55</option><option>60</option><option>65</option><option>70</option><option>75</option></select> articles<br>published by <select name="p"><option value="">all</option><?$pub_query = mysql_query("select distinct publication from clips");$pub_count = mysql_num_rows($pub_query);for ($i=0;$i<$pub_count;$i++) {	$pub_row = mysql_fetch_array($pub_query);	$publication = $pub_row['publication'];	echo "<option>$publication</option>\r";}?>  </select><br>of type   <select name="t">  <option value="">all</option>  <option value="interview">Interview</option>  <option value="report">Report</option>  <option value="opinion">Bell Lap/Opinion</option>  </select><br><input type="submit" value="Sort"></p></form><?// The query is built from the variables "order_by" and "limit" which I set in // the "HTTP_GET" string. The base part is the same:$query = "select * from clips";// Now, depending on our variables:if ($type || $pub) {	$query .= " where ";	if ($type) {		$query .= "type = '$type'";	}	if ($type && $pub) {		$query .= " and ";	}	if ($pub) {		$query .= "publication = '$pub'";	}}switch ($order_by) {	case "date_a" :		$query .= " order by date asc";		break;	case "pub" :		$query .= " order by publication";		break;	case "title" :		$query .= " order by title";		break;	case "type" :		$query .= " order by type";		break;	case "date_d" :	default :		$query .= " order by date desc";		break;}if ($limit) {	$query .= " limit $limit";}// This bit stays the same. It's just the query that changes.$clip_list = mysql_query($query);$howmany = mysql_num_rows($clip_list);for ($i = 0; $i < $howmany; $i++) {	$this_clip = mysql_fetch_array($clip_list);	$title = $this_clip['title'];	$link = $this_clip['link'];	$date = $this_clip['date'];	$description = $this_clip['description'];	$type = $this_clip['type'];	$publication = $this_clip['publication'];	echo "<p>\r";	if ($link != "") {		echo "<a href=\"$link\">$title</a>\r";	} else {		echo $title;	}	echo "($date)\r";	if ($description != "") {		echo "<br>\r$description\r";	}	echo "<!-- $type, $publication -->\r";	echo "</p>\r";}  tail();?>	</body></html>